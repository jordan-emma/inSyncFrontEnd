import{_ as g,g as a,r as h,o as _,c as d,a as t,t as n,b as p,d as f,p as y,f as v}from"./index-B8jtT4aK.js";import{M as I}from"./MessageAlert-i0Q294OJ.js";const E={components:{MessageAlert:I},data(){return{images:[a(()=>import("./character1-BvgsdF9j.js"),[]),a(()=>import("./character2-tx2wnsTG.js"),[]),a(()=>import("./character3-C33-zlGv.js"),[]),a(()=>import("./character4-DQ65GeO5.js"),[]),a(()=>import("./character5-C9XImlBI.js"),[]),a(()=>import("./character6-DSM1U0QW.js"),[]),a(()=>import("./character7-CskD5GVT.js"),[]),a(()=>import("./character8-Bl8I3MZC.js"),[])],randomImage:"",showAlert:!0,alertMessage:"Click here to copy game code!",alertIcon:""}},async created(){this.alertIcon=(await a(async()=>{const{default:o}=await import("./copyIcon-4VfZVBk3.js");return{default:o}},[])).default;const e=await Promise.all(this.images);this.randomImage=e[Math.floor(Math.random()*e.length)].default},mounted(){this.joinGameRoom()},computed:{playerList(){const e=this.$gameStore.playerNames,o=this.$gameStore.hostPlayerName,s=e.filter(c=>c!==o);return s.length===0?"":s.length===1?s[0]:s.length===2?s.join(" and "):s.slice(0,-1).join(", ")+", and "+s[s.length-1]},hosting(){return this.$gameStore.hostPlayerId===this.$userStore.id}},watch:{$gameStore:{deep:!0,handler(){this.$gameStore.game.status==="CLUE_GIVING"&&this.$router.push("/clue")}}},methods:{toggleBack(){this.$router.push("/play")},async copyText(){try{const e=this.$refs.message.textContent;await navigator.clipboard.writeText(e),this.alertMessage="Copied!"}catch{this.$error("Failed to copy text")}},joinGameRoom(){this.$gameStore.empty||this.$socket.emit("join_game",{game_id:this.$gameStore.game.id,game_code:this.$gameStore.code})},async goToClues(){this.$loading.yes();try{(await this.$axios.post(`/game/${this.$gameStore.game.id}/start`)).status!==200?this.$error("Failed to start game."):this.$router.push("/clue")}catch{this.$error("Failed to start game")}finally{this.$loading.no()}}}},m=e=>(y("data-v-12cba48f"),e=e(),v(),e),T={class:"purpleBackground"},P={class:"pageContainer"},$={class:"back"},S={class:"welcome"},b=m(()=>t("h2",null,"Lobby",-1)),C={class:"roomCode"},k=m(()=>t("h4",null,"Room Code: ",-1)),w={class:"profilePicture"},A=["src"],L={class:"button-container"};function V(e,o,s,c,i,r){const u=h("message-alert");return _(),d("div",T,[t("div",P,[t("div",$,[t("button",{class:"rounded-button",onClick:o[0]||(o[0]=(...l)=>r.toggleBack&&r.toggleBack(...l)),"aria-label":"Go back to play view"},"Back")]),t("header",S,[b,t("div",C,[k,t("h4",{ref:"message"},n(e.$gameStore.code),513)]),p(u,{show:i.showAlert,messageText:i.alertMessage,messageIcon:i.alertIcon,onClick:o[1]||(o[1]=l=>r.copyText())},null,8,["show","messageText","messageIcon"])]),t("div",w,[t("img",{src:i.randomImage,alt:"Profile Picture",class:"rounded-image"},null,8,A)]),t("div",null,[t("p",null,"Host: "+n(e.$gameStore.hostPlayerName),1),t("p",null,n(r.playerList),1)]),t("div",L,[r.hosting?(_(),d("button",{key:0,class:"rounded-button",onClick:o[2]||(o[2]=(...l)=>r.goToClues&&r.goToClues(...l))},"START GAME")):f("",!0)])])])}const D=g(E,[["render",V],["__scopeId","data-v-12cba48f"]]);export{D as default};
