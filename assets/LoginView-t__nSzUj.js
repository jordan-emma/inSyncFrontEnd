import{_ as h,g as p,r as u,o as c,c as w,a as s,h as r,v as l,i as g,j as d,b as f,t as _,p as b,f as S}from"./index-B8jtT4aK.js";import{M as v}from"./MessageAlert-i0Q294OJ.js";import{_ as F}from"./insyncLogo-Dfr4VoEL.js";const U={components:{messageAlert:v},async created(){this.alertIcon=(await p(async()=>{const{default:i}=await import("./reminderIcon-G87uuzYV.js");return{default:i}},[])).default,this.$userStore.clear(),this.$gameStore.clear()},data(){return{name:"",email:"",password:"",confirm_password:"",showSignUpField:!1,showAlert:!1,alertMessage:"",alertIcon:""}},computed:{passwordsMatch(){return this.password===this.confirm_password},isFormValid(){if(!this.email.trim()||!this.password.trim())return!1;if(!this.showSignUpField)return!0;const i=this.name.trim()&&this.email.trim()&&this.password.trim()&&this.confirm_password.trim()!=="",e=this.passwordsMatch;return i&&e}},watch:{email(){this.checkForAlert()},password(){this.checkForAlert(),this.checkPasswordMismatch()},confirm_password(){this.checkPasswordMismatch()}},methods:{resetFields(){this.name="",this.email="",this.password="",this.confirm_password="",this.showAlert=!1},toggleView(i){this.showSignUpField=i==="signUp",this.resetFields()},async handleSubmit(){if(!this.isFormValid){this.$error("Details missing...");return}try{this.$loading.yes(),this.showSignUpField?await this.$userStore.signUp(this.name,this.email,this.password,this.confirm_password):await this.$userStore.login(this.email,this.password),this.$success("You are logged in!"),this.$router.push("/landing")}catch(i){this.$badRequest(i)}finally{this.$loading.no()}},checkForAlert(){!this.showSignUpField&&(!this.email.trim()||!this.password.trim())?(this.alertMessage="Donâ€™t forget to fill in both email and password.",this.showAlert=!0):this.showAlert=!1},checkPasswordMismatch(){!this.passwordsMatch&&this.showSignUpField?(this.alertMessage="Passwords do not match",this.showAlert=!0):this.passwordsMatch&&(this.showAlert=!1)}}},n=i=>(b("data-v-75f5eae9"),i=i(),S(),i),y={class:"purpleBackground"},M={class:"pageContainer"},k=n(()=>s("div",{class:"logo"},[s("img",{src:F,alt:"Logo of inSync"})],-1)),V={class:"inputContainer"},A={class:"form-group"},I=n(()=>s("label",{for:"name"},"Name:",-1)),x={class:"form-group"},P=n(()=>s("label",{for:"email"},"Email:",-1)),C={class:"form-group"},q=n(()=>s("label",{for:"password"},"Password:",-1)),B={class:"form-group"},D=n(()=>s("label",{for:"confirm_password"},"Confirm Password:",-1)),L={class:"button-container"},R={class:"rounded-button floating-button2",type:"submit"},E={class:"rounded-button floating-button1",type:"reset","aria-label":"Reset all form fields"};function T(i,e,N,j,t,a){const m=u("message-alert");return c(),w("div",y,[s("div",M,[r(s("button",{class:"rounded-button back",type:"button",onClick:e[0]||(e[0]=o=>a.toggleView("login")),"aria-label":"Go back to Login form","aria-controls":"loginForm"}," Back ",512),[[l,t.showSignUpField]]),k,s("form",{name:"loginForm",onReset:e[6]||(e[6]=(...o)=>a.resetFields&&a.resetFields(...o)),onSubmit:e[7]||(e[7]=g((...o)=>a.handleSubmit&&a.handleSubmit(...o),["prevent"])),id:"loginForm",role:"form"},[s("div",V,[r(s("div",A,[I,r(s("input",{id:"name",type:"text","onUpdate:modelValue":e[1]||(e[1]=o=>t.name=o),"aria-required":"true"},null,512),[[d,t.name,void 0,{trim:!0}]])],512),[[l,t.showSignUpField]]),s("div",x,[P,r(s("input",{id:"email",type:"email",autocomplete:"email","onUpdate:modelValue":e[2]||(e[2]=o=>t.email=o),"aria-required":"true"},null,512),[[d,t.email,void 0,{trim:!0}]])]),s("div",C,[q,r(s("input",{id:"password",autocomplete:"current-password",type:"password","onUpdate:modelValue":e[3]||(e[3]=o=>t.password=o),"aria-required":"true"},null,512),[[d,t.password,void 0,{trim:!0}]])]),r(s("div",B,[D,r(s("input",{id:"confirm_password",autocomplete:"new-password",type:"password","onUpdate:modelValue":e[4]||(e[4]=o=>t.confirm_password=o),"aria-required":"true"},null,512),[[d,t.confirm_password,void 0,{trim:!0}]])],512),[[l,t.showSignUpField]]),f(m,{show:t.showAlert,messageText:t.alertMessage,messageIcon:t.alertIcon,"aria-live":"assertive"},null,8,["show","messageText","messageIcon"])]),s("div",L,[r(s("button",{class:"rounded-button floating-button1",type:"button",onClick:e[5]||(e[5]=o=>a.toggleView("signUp")),"aria-label":"Switch to Sign Up form","aria-controls":"loginForm"}," Sign Up ",512),[[l,!t.showSignUpField]]),s("button",R,_(t.showSignUpField?"Sign Up":"Login"),1),r(s("button",E," Reset ",512),[[l,!t.showSignUpField]])])],32)])])}const z=h(U,[["render",T],["__scopeId","data-v-75f5eae9"]]);export{z as default};
