import{_ as p,g as S,r as d,o as i,c as n,a as s,t as r,b as h,d as m,p as C,f,k as b}from"./index-BdN7wDRo.js";import{S as v}from"./slider-Bd8_5W1r.js";import{M as O}from"./MessageAlert-C_vlpHyW.js";const I={name:"GuessSubmit",components:{MessageAlert:O,Slider:v},props:{canEdit:{type:Boolean,required:!0},clueGiverName:{type:String,required:!0},prompt:{type:String,required:!0},clueNumber:{type:Number,required:!0},clueObject:{type:Object,required:!0}},data(){return{alertIcon:""}},async created(){this.alertIcon=(await S(async()=>{const{default:e}=await import("./quietIcon-MD_UJ3fy.js");return{default:e}},[])).default},methods:{async setGuessValue(e){try{if((await this.$axios.post(`/clue/${this.clueObject.id}/guess`,{guess_value:e})).status!==200)throw"Failed to update guess value"}catch(l){console.log(l)}},async closeClue(){try{if((await this.$axios.post(`/clue/${this.clueObject.id}/close`)).status!==200)throw"Failed to close clue"}catch(e){console.log(e)}}}},j={class:"pageHeading"},G={class:"slider-wrapper"},x={class:"button-container"};function N(e,l,t,g,c,u){const o=d("Slider"),a=d("message-alert");return i(),n("div",null,[s("div",j,[s("h2",null,r(t.clueGiverName)+" Clue: "+r(t.prompt),1)]),s("div",G,[s("p",null,r(t.clueObject.low),1),h(o,{max:t.clueObject.max_value,value:t.clueObject.guess_value,onValueUpdated:u.setGuessValue,disabled:!t.canEdit},null,8,["max","value","onValueUpdated","disabled"]),s("p",null,r(t.clueObject.high),1)]),s("div",x,[t.canEdit?(i(),n("button",{key:0,class:"rounded-button",onClick:l[0]||(l[0]=(..._)=>u.closeClue&&u.closeClue(..._))},"Submit")):m("",!0),h(a,{show:!t.canEdit,messageText:"Shhh! this is your clue... Don't give any hints",messageIcon:c.alertIcon},null,8,["show","messageIcon"])])])}const w=p(I,[["render",N],["__scopeId","data-v-e5195588"]]),k={name:"GuessReveal",components:{Slider:v},props:{prompt:{type:String,required:!0},clueObject:{type:Object,required:!0},host:{type:Boolean,required:!0}},computed:{isGameFinished(){return this.$gameStore.game.status==="FINISHED"}},methods:{async goToNextClue(){try{this.$loading.yes(),await this.$gameStore.setNextGuessId()}catch(e){console.log(e)}finally{this.$loading.no()}},goToResults(){if(this.isGameFinished){this.$router.push("/results");return}}}},y=e=>(C("data-v-809fd292"),e=e(),f(),e),E=y(()=>s("div",{class:"pageHeading"},[s("h2",null,"Let's see how you did...")],-1)),P={class:"prompt"},B={class:"slider-wrapper"},V=y(()=>s("p",{class:"prompt"},"Your guess:",-1)),q={class:"slider-wrapper"},T={class:"button-container"};function F(e,l,t,g,c,u){const o=d("Slider");return i(),n("div",null,[E,s("div",null,[s("p",P,r(t.clueObject.player_name)+"'s Clue: "+r(t.prompt),1),s("div",B,[s("p",null,r(t.clueObject.low),1),h(o,{max:t.clueObject.max_value,value:t.clueObject.value,disabled:!0},null,8,["max","value"]),s("p",null,r(t.clueObject.high),1)]),V,s("div",q,[s("p",null,r(t.clueObject.low),1),h(o,{max:t.clueObject.max_value,value:t.clueObject.guess_value,disabled:!0},null,8,["max","value"]),s("p",null,r(t.clueObject.high),1)])]),s("div",T,[t.host&&!u.isGameFinished?(i(),n("button",{key:0,class:"rounded-button",onClick:l[0]||(l[0]=(...a)=>u.goToNextClue&&u.goToNextClue(...a))},"Next")):m("",!0),u.isGameFinished?(i(),n("button",{key:1,class:"rounded-button",onClick:l[1]||(l[1]=(...a)=>u.goToResults&&u.goToResults(...a))},"Results")):m("",!0)])])}const R=p(k,[["render",F],["__scopeId","data-v-809fd292"]]),H={components:{GuessSubmit:w,GuessReveal:R},data(){var e;return{clueNumber:1,totalCluesProvided:"total clues provided",prompt:"",clueGiver:"",clueGiverId:0,maxValue:0,clueId:(e=this.$gameStore.game)==null?void 0:e.current_clue_id,clueObject:{}}},watch:{$gameStore:{deep:!0,handler(){this.clueId=this.$gameStore.game.current_clue_id}},$clueStore:{deep:!0,handler(){this.setClueProperties()}},clueId(){this.setClueProperties()}},async created(){!this.$userStore.isLoggedIn&&this.$gameStore.empty||this.setClueProperties()},computed:{clueGiverName(){return this.isClueGiver?"Your":`${this.clueGiver}'s`},isClueGiver(){return this.$userStore.user.id===this.clueGiverId},isHost(){return this.$gameStore.hostPlayerId===this.$userStore.id}},methods:{toggleBack(){this.$router.push("/play")},changeClueNumber(){this.clueNumber<this.totalCluesProvided&&this.clueNumber++},async setCurrentClue(){if(this.isHost&&!this.clueId)try{await this.$gameStore.setNextGuessId()}catch(e){console.log(e)}},setClueProperties(){if(!this.clueId){this.setCurrentClue();return}let e=this.$clueStore.clue_by_id(this.clueId);if(!e){this.$clueStore.fetchClue(this.clueId);return}this.clueObject=e,this.prompt=e.prompt,this.clueGiver=e.player_name,this.totalCluesProvided=e.total_clues,this.clueGiverId=e.player_id,this.clueId=e.id},capitalizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},D={class:"purpleBackground"},L={class:"pageContainer"},z={class:"back"};function A(e,l,t,g,c,u){const o=d("guess-submit"),a=d("guess-reveal");return i(),n("div",D,[s("div",L,[s("div",z,[s("button",{class:"rounded-button",onClick:l[0]||(l[0]=(..._)=>u.toggleBack&&u.toggleBack(..._))},"Exit")]),c.clueObject.status==="OPEN"?(i(),b(o,{key:0,"clue-giver-name":u.clueGiverName,prompt:u.capitalizeString(c.prompt),clueId:c.clueId,canEdit:!u.isClueGiver,clueNumber:c.clueNumber,clueObject:c.clueObject},null,8,["clue-giver-name","prompt","clueId","canEdit","clueNumber","clueObject"])):m("",!0),c.clueObject.status==="CLOSED"?(i(),b(a,{key:1,host:u.isHost,prompt:u.capitalizeString(c.prompt),clueObject:c.clueObject},null,8,["host","prompt","clueObject"])):m("",!0)])])}const J=p(H,[["render",A]]);export{J as default};
