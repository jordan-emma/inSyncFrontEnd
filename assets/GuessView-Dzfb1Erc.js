import{_ as g,g as S,r as d,o as i,c as n,a as s,t as u,b as m,d as h,p as C,f,k as b}from"./index-Bfx69gEw.js";import{S as v}from"./slider-C-vDa1YZ.js";import{M as I}from"./MessageAlert-D-1ddTRY.js";const O={name:"GuessSubmit",components:{MessageAlert:I,Slider:v},props:{canEdit:{type:Boolean,required:!0},clueGiverName:{type:String,required:!0},prompt:{type:String,required:!0},clueNumber:{type:Number,required:!0},clueObject:{type:Object,required:!0}},data(){return{alertIcon:""}},async created(){try{this.alertIcon=(await S(async()=>{const{default:e}=await import("./quietIcon-MD_UJ3fy.js");return{default:e}},[])).default}catch{this.$error("Error loading alert icon")}},methods:{async setGuessValue(e){try{if((await this.$axios.post(`/clue/${this.clueObject.id}/guess`,{guess_value:e})).status!==200)throw"Failed to update guess value"}catch{this.$error("Error updating guess value")}},async closeClue(){try{if((await this.$axios.post(`/clue/${this.clueObject.id}/close`)).status!==200)throw"Failed to close clue"}catch{this.$error("Failed to close clue")}}}},j={class:"pageHeading"},x={class:"slider-wrapper"},G={"aria-label":"Low range value"},w={"aria-label":"High range value"},N={class:"button-container"};function k(e,l,t,p,a,r){const o=d("Slider"),c=d("message-alert");return i(),n("div",null,[s("div",j,[s("h2",null,u(t.clueGiverName)+" Clue: "+u(t.prompt),1)]),s("div",x,[s("p",G,u(t.clueObject.low),1),m(o,{max:t.clueObject.max_value,value:t.clueObject.guess_value,onValueUpdated:r.setGuessValue,disabled:!t.canEdit,"aria-label":"Guess slider"},null,8,["max","value","onValueUpdated","disabled"]),s("p",w,u(t.clueObject.high),1)]),s("div",N,[t.canEdit?(i(),n("button",{key:0,class:"rounded-button",onClick:l[0]||(l[0]=(..._)=>r.closeClue&&r.closeClue(..._)),"aria-label":"Submit your guess"}," Submit ")):h("",!0),m(c,{show:!t.canEdit,messageText:"Shhh! this is your clue... Don't give any hints",messageIcon:a.alertIcon,"aria-label":"Alert message: This is your clue, don't give any hints"},null,8,["show","messageIcon"])])])}const E=g(O,[["render",k],["__scopeId","data-v-fea0aeee"]]),P={name:"GuessReveal",components:{Slider:v},props:{prompt:{type:String,required:!0},clueObject:{type:Object,required:!0},host:{type:Boolean,required:!0}},computed:{isGameFinished(){return this.$gameStore.game.status==="FINISHED"}},methods:{async goToNextClue(){this.$loading.yes();try{await this.$gameStore.setNextGuessId()}catch{this.$error("Failed to set next guess ID")}finally{this.$loading.no()}},goToResults(){this.isGameFinished&&this.$router.push("/results")}}},y=e=>(C("data-v-f746aca5"),e=e(),f(),e),V=y(()=>s("div",{class:"pageHeading"},[s("h2",null,"Let's see how you did...")],-1)),B={class:"prompt","aria-label":"Clue given by player"},F={class:"slider-wrapper"},H={"aria-label":"Low range value"},T={"aria-label":"High range value"},q=y(()=>s("p",{class:"prompt","aria-label":"Your guess"},"Your guess:",-1)),$={class:"slider-wrapper"},L={"aria-label":"Low range value"},R={"aria-label":"High range value"},D={class:"button-container"};function U(e,l,t,p,a,r){const o=d("Slider");return i(),n("div",null,[V,s("div",null,[s("p",B,u(t.clueObject.player_name)+"'s Clue: "+u(t.prompt),1),s("div",F,[s("p",H,u(t.clueObject.low),1),m(o,{max:t.clueObject.max_value,value:t.clueObject.value,disabled:!0,"aria-label":"Clue slider"},null,8,["max","value"]),s("p",T,u(t.clueObject.high),1)]),q,s("div",$,[s("p",L,u(t.clueObject.low),1),m(o,{max:t.clueObject.max_value,value:t.clueObject.guess_value,disabled:!0,"aria-label":"Your guess slider"},null,8,["max","value"]),s("p",R,u(t.clueObject.high),1)])]),s("div",D,[t.host&&!r.isGameFinished?(i(),n("button",{key:0,class:"rounded-button",onClick:l[0]||(l[0]=(...c)=>r.goToNextClue&&r.goToNextClue(...c)),"aria-label":"Go to the next clue"}," Next ")):h("",!0),r.isGameFinished?(i(),n("button",{key:1,class:"rounded-button",onClick:l[1]||(l[1]=(...c)=>r.goToResults&&r.goToResults(...c)),"aria-label":"View the results"}," Results ")):h("",!0)])])}const A=g(P,[["render",U],["__scopeId","data-v-f746aca5"]]),Y={components:{GuessSubmit:E,GuessReveal:A},data(){var e;return{clueNumber:1,totalCluesProvided:"total clues provided",prompt:"",clueGiver:"",clueGiverId:0,maxValue:0,clueId:(e=this.$gameStore.game)==null?void 0:e.current_clue_id,clueObject:{}}},watch:{$gameStore:{deep:!0,handler(){var e;this.clueId=(e=this.$gameStore.game)==null?void 0:e.current_clue_id}},$clueStore:{deep:!0,handler(){this.setClueProperties()}},clueId(){this.setClueProperties()}},async created(){!this.$userStore.isLoggedIn&&this.$gameStore.empty||this.setClueProperties()},computed:{clueGiverName(){return this.isClueGiver?"Your":`${this.clueGiver}'s`},isClueGiver(){return this.$userStore.user.id===this.clueGiverId},isHost(){return this.$gameStore.hostPlayerId===this.$userStore.id}},methods:{toggleBack(){this.$router.push("/play")},async setCurrentClue(){if(this.isHost&&!this.clueId)try{await this.$gameStore.setNextGuessId()}catch{this.$error("Unable to set the next clue.")}},async setClueProperties(){if(!this.clueId){await this.setCurrentClue();return}const e=this.$clueStore.clue_by_id(this.clueId);if(!e){try{await this.$clueStore.fetchClue(this.clueId)}catch{this.$error("Unable to fetch the clue data.")}return}this.updateClueProperties(e)},updateClueProperties(e){this.clueObject=e,this.prompt=e.prompt,this.clueGiver=e.player_name,this.totalCluesProvided=e.total_clues,this.clueGiverId=e.player_id,this.clueId=e.id},capitalizeString(e){return e.charAt(0).toUpperCase()+e.slice(1)}}},z={class:"purpleBackground"},M={class:"pageContainer"},J={class:"back"};function K(e,l,t,p,a,r){const o=d("guess-submit"),c=d("guess-reveal");return i(),n("div",z,[s("div",M,[s("div",J,[s("button",{class:"rounded-button",onClick:l[0]||(l[0]=(..._)=>r.toggleBack&&r.toggleBack(..._))},"Exit")]),a.clueObject.status==="OPEN"?(i(),b(o,{key:0,"clue-giver-name":r.clueGiverName,prompt:r.capitalizeString(a.prompt),clueId:a.clueId,canEdit:!r.isClueGiver,clueNumber:a.clueNumber,clueObject:a.clueObject},null,8,["clue-giver-name","prompt","clueId","canEdit","clueNumber","clueObject"])):h("",!0),a.clueObject.status==="CLOSED"?(i(),b(c,{key:1,host:r.isHost,prompt:r.capitalizeString(a.prompt),clueObject:a.clueObject},null,8,["host","prompt","clueObject"])):h("",!0)])])}const Z=g(Y,[["render",K]]);export{Z as default};
